<!DOCTYPE html>
<html>
<head>
  <style>
    .vega-actions a {
        margin-right: 12px;
        color: #757575;
        font-weight: normal;
        font-size: 13px;
    }
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@4"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@2.6.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@3"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
      var spec = {"config": {"view": {"width": 400, "height": 300}}, "vconcat": [{"data": {"name": "data-65efcf1efe3271b993d3c4822e0b34b8"}, "mark": "bar", "encoding": {"color": {"condition": {"value": "steelblue", "selection": "selector006"}, "value": "grey"}, "tooltip": [{"type": "quantitative", "field": "progresstodate", "format": ",.2%"}], "x": {"type": "quantitative", "field": "progresstodate"}, "y": {"type": "nominal", "field": "status"}}, "selection": {"selector006": {"type": "multi", "fields": ["status"]}}, "transform": [{"aggregate": [{"op": "sum", "field": "budget", "as": "max_budget"}, {"op": "sum", "field": "progress", "as": "sum_Installed_qty"}], "groupby": ["status"]}, {"calculate": "datum.sum_Installed_qty/ datum.max_budget", "as": "progresstodate"}]}, {"data": {"name": "data-65efcf1efe3271b993d3c4822e0b34b8"}, "mark": "geoshape", "encoding": {"color": {"type": "quantitative", "field": "progresstodate"}, "tooltip": [{"type": "quantitative", "field": "progresstodate", "format": ",.2%"}, {"type": "nominal", "field": "id"}]}, "height": 700, "transform": [{"filter": {"selection": "selector006"}}, {"lookup": "id", "as": "geom", "from": {"data": {"values": [{"id": "0", "type": "Feature", "properties": {"id": 22, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85988533065319, -20.718280789561163], [164.85988533065319, -20.71756099900364], [164.8604476264048, -20.71756099900364], [164.8604476264048, -20.718280789561163], [164.85988533065319, -20.718280789561163]]]}}, {"id": "1", "type": "Feature", "properties": {"id": 28, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8598726947936, -20.719099861574893], [164.8598726947936, -20.718733761205122], [164.86058030293046, -20.718733761205122], [164.86058030293046, -20.719099861574893], [164.8598726947936, -20.719099861574893]]]}}, {"id": "2", "type": "Feature", "properties": {"id": 32, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86092778906908, -20.718268379379136], [164.86092778906908, -20.717548588821614], [164.8614837668909, -20.717548588821614], [164.8614837668909, -20.718268379379136], [164.86092778906908, -20.718268379379136]]]}}, {"id": "3", "type": "Feature", "properties": {"id": 38, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8609088352797, -20.71909365648388], [164.8609088352797, -20.718721351023095], [164.86161644341658, -20.718721351023095], [164.86161644341658, -20.71909365648388], [164.8609088352797, -20.71909365648388]]]}}, {"id": "4", "type": "Feature", "properties": {"id": 2, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85888077981605, -20.7182994048342], [164.85888077981605, -20.71757961427668], [164.85944307556767, -20.71757961427668], [164.85944307556767, -20.7182994048342], [164.85888077981605, -20.7182994048342]]]}}, {"id": "5", "type": "Feature", "properties": {"id": 8, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85886814395647, -20.719118476847935], [164.85886814395647, -20.71875237647816], [164.85957575209332, -20.71875237647816], [164.85957575209332, -20.719118476847935], [164.85886814395647, -20.719118476847935]]]}}, {"id": "6", "type": "Feature", "properties": {"id": 12, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8599737816703, -20.71996236922572], [164.8599737816703, -20.719242578668197], [164.8605360774219, -20.719242578668197], [164.8605360774219, -20.71996236922572], [164.8599737816703, -20.71996236922572]]]}}, {"id": "7", "type": "Feature", "properties": {"id": 18, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8599611458107, -20.72078144123945], [164.8599611458107, -20.720409135778663], [164.86066875394758, -20.720409135778663], [164.86066875394758, -20.72078144123945], [164.8599611458107, -20.72078144123945]]]}}, {"id": "8", "type": "Feature", "properties": {"id": 41, "width": null, "height": null, "area": null, "perimeter": null, "type": "road"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85583553765565, -20.71724453936197], [164.85623356723264, -20.71723833427096], [164.85643574098603, -20.72088072269566], [164.85602507554944, -20.720886927786673], [164.85583553765565, -20.71724453936197]]]}}, {"id": "9", "type": "Feature", "properties": {"id": 27, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8595820700231, -20.72337516928293], [164.8595820700231, -20.723009068913157], [164.86028967815997, -20.723009068913157], [164.86028967815997, -20.72337516928293], [164.8595820700231, -20.72337516928293]]]}}, {"id": "10", "type": "Feature", "properties": {"id": 23, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8595947058827, -20.7225560972692], [164.8595947058827, -20.72183630671168], [164.8601570016343, -20.72183630671168], [164.8601570016343, -20.7225560972692], [164.8595947058827, -20.7225560972692]]]}}, {"id": "11", "type": "Feature", "properties": {"id": 37, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86062452843902, -20.72336896419192], [164.86062452843902, -20.722996658731134], [164.86132581864607, -20.722996658731134], [164.86132581864607, -20.72336896419192], [164.86062452843902, -20.72336896419192]]]}}, {"id": "12", "type": "Feature", "properties": {"id": 33, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8606371642986, -20.722543687087175], [164.8606371642986, -20.721823896529653], [164.8611931421204, -20.721823896529653], [164.8611931421204, -20.722543687087175], [164.8606371642986, -20.722543687087175]]]}}, {"id": "13", "type": "Feature", "properties": {"id": 7, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85857751918596, -20.723393784555974], [164.85857751918596, -20.7230276841862], [164.85928512732283, -20.7230276841862], [164.85928512732283, -20.723393784555974], [164.85857751918596, -20.723393784555974]]]}}, {"id": "14", "type": "Feature", "properties": {"id": 3, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85859647297534, -20.72257471254224], [164.85859647297534, -20.72185492198472], [164.85915245079715, -20.72185492198472], [164.85915245079715, -20.72257471254224], [164.85859647297534, -20.72257471254224]]]}}, {"id": "15", "type": "Feature", "properties": {"id": 17, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85967052104021, -20.725056748947488], [164.85967052104021, -20.7246844434867], [164.86037812917706, -20.7246844434867], [164.86037812917706, -20.725056748947488], [164.85967052104021, -20.725056748947488]]]}}, {"id": "16", "type": "Feature", "properties": {"id": 11, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8596894748296, -20.724237676933758], [164.8596894748296, -20.723517886376236], [164.8602454526514, -20.723517886376236], [164.8602454526514, -20.724237676933758], [164.8596894748296, -20.724237676933758]]]}}, {"id": "17", "type": "Feature", "properties": {"id": 26, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8654135192224, -20.71982585722343], [164.8654135192224, -20.71945355176264], [164.86612112735924, -20.71945355176264], [164.86612112735924, -20.71982585722343], [164.8654135192224, -20.71982585722343]]]}}, {"id": "18", "type": "Feature", "properties": {"id": 21, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86543247301177, -20.719000580118685], [164.86543247301177, -20.718286994652175], [164.86598845083356, -20.718286994652175], [164.86598845083356, -20.719000580118685], [164.86543247301177, -20.719000580118685]]]}}, {"id": "19", "type": "Feature", "properties": {"id": 36, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86645597763828, -20.719813447041403], [164.86645597763828, -20.719441141580617], [164.86716358577513, -20.719441141580617], [164.86716358577513, -20.719813447041403], [164.86645597763828, -20.719813447041403]]]}}, {"id": "20", "type": "Feature", "properties": {"id": 31, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86647493142766, -20.718994375027673], [164.86647493142766, -20.71827458447015], [164.86703090924948, -20.71827458447015], [164.86703090924948, -20.718994375027673], [164.86647493142766, -20.718994375027673]]]}}, {"id": "21", "type": "Feature", "properties": {"id": 6, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86441528631502, -20.71984447249647], [164.86441528631502, -20.719472167035683], [164.86512289445187, -20.719472167035683], [164.86512289445187, -20.71984447249647], [164.86441528631502, -20.71984447249647]]]}}, {"id": "22", "type": "Feature", "properties": {"id": 1, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8644279221746, -20.719019195391724], [164.8644279221746, -20.7182994048342], [164.86499021792622, -20.7182994048342], [164.86499021792622, -20.719019195391724], [164.8644279221746, -20.719019195391724]]]}}, {"id": "23", "type": "Feature", "properties": {"id": 16, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86550828816928, -20.72150123179697], [164.86550828816928, -20.721135131427197], [164.86621589630613, -20.721135131427197], [164.86621589630613, -20.72150123179697], [164.86550828816928, -20.72150123179697]]]}}, {"id": "24", "type": "Feature", "properties": {"id": 14, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86552092402886, -20.72068215978324], [164.86552092402886, -20.71996236922572], [164.86608321978048, -20.71996236922572], [164.86608321978048, -20.72068215978324], [164.86552092402886, -20.72068215978324]]]}}, {"id": "25", "type": "Feature", "properties": {"id": 30, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85963893139126, -20.71445224840607], [164.85963893139126, -20.714079942945283], [164.8603465395281, -20.714079942945283], [164.8603465395281, -20.71445224840607], [164.85963893139126, -20.71445224840607]]]}}, {"id": "26", "type": "Feature", "properties": {"id": 25, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85965788518064, -20.71363317639234], [164.85965788518064, -20.712913385834817], [164.86021386300246, -20.712913385834817], [164.86021386300246, -20.71363317639234], [164.85965788518064, -20.71363317639234]]]}}, {"id": "27", "type": "Feature", "properties": {"id": 40, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86068138980716, -20.714439838224042], [164.86068138980716, -20.714067532763256], [164.861388997944, -20.714067532763256], [164.861388997944, -20.714439838224042], [164.86068138980716, -20.714439838224042]]]}}, {"id": "28", "type": "Feature", "properties": {"id": 35, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86069402566673, -20.713620766210312], [164.86069402566673, -20.71290097565279], [164.86125632141835, -20.71290097565279], [164.86125632141835, -20.713620766210312], [164.86069402566673, -20.713620766210312]]]}}, {"id": "29", "type": "Feature", "properties": {"id": 10, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8586343805541, -20.714470863679107], [164.8586343805541, -20.71409855821832], [164.85934198869097, -20.71409855821832], [164.85934198869097, -20.714470863679107], [164.8586343805541, -20.714470863679107]]]}}, {"id": "30", "type": "Feature", "properties": {"id": 5, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85865333434347, -20.713651791665377], [164.85865333434347, -20.712932001107855], [164.8592093121653, -20.712932001107855], [164.8592093121653, -20.713651791665377], [164.85865333434347, -20.713651791665377]]]}}, {"id": "31", "type": "Feature", "properties": {"id": 20, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85972738240835, -20.716133828070625], [164.85972738240835, -20.71576152260984], [164.8604349905452, -20.71576152260984], [164.8604349905452, -20.716133828070625], [164.85972738240835, -20.716133828070625]]]}}, {"id": "32", "type": "Feature", "properties": {"id": 13, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.85974633619773, -20.71530855096588], [164.85974633619773, -20.714588760408358], [164.86030231401955, -20.714588760408358], [164.86030231401955, -20.71530855096588], [164.85974633619773, -20.71530855096588]]]}}, {"id": "33", "type": "Feature", "properties": {"id": 29, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86469327522593, -20.71476870804774], [164.86469327522593, -20.714396402586953], [164.86540088336278, -20.714396402586953], [164.86540088336278, -20.71476870804774], [164.86469327522593, -20.71476870804774]]]}}, {"id": "34", "type": "Feature", "properties": {"id": 24, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8647122290153, -20.713949636034005], [164.8647122290153, -20.713229845476484], [164.86526820683713, -20.713229845476484], [164.86526820683713, -20.713949636034005], [164.8647122290153, -20.713949636034005]]]}}, {"id": "35", "type": "Feature", "properties": {"id": 39, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86573573364183, -20.714756297865712], [164.86573573364183, -20.714390197495938], [164.86644334177868, -20.714390197495938], [164.86644334177868, -20.714756297865712], [164.86573573364183, -20.714756297865712]]]}}, {"id": "36", "type": "Feature", "properties": {"id": 34, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86574836950143, -20.713937225851982], [164.86574836950143, -20.71321743529446], [164.86631066525302, -20.71321743529446], [164.86631066525302, -20.713937225851982], [164.86574836950143, -20.713937225851982]]]}}, {"id": "37", "type": "Feature", "properties": {"id": 9, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.8636887243888, -20.714787323320778], [164.8636887243888, -20.71441501785999], [164.86439633252564, -20.71441501785999], [164.86439633252564, -20.714787323320778], [164.8636887243888, -20.714787323320778]]]}}, {"id": "38", "type": "Feature", "properties": {"id": 4, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86370767817817, -20.713968251307048], [164.86370767817817, -20.713248460749526], [164.864263656, -20.713248460749526], [164.864263656, -20.713968251307048], [164.86370767817817, -20.713968251307048]]]}}, {"id": "39", "type": "Feature", "properties": {"id": 19, "width": 0.000707, "height": 0.000371, "area": 0.0, "perimeter": 0.002157, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86478172624302, -20.716450287712295], [164.86478172624302, -20.716077982251505], [164.8654893343799, -20.716077982251505], [164.8654893343799, -20.716450287712295], [164.86478172624302, -20.716450287712295]]]}}, {"id": "40", "type": "Feature", "properties": {"id": 15, "width": 0.000558, "height": 0.000719, "area": 0.0, "perimeter": 0.002555, "type": "foundation"}, "geometry": {"type": "Polygon", "coordinates": [[[164.86480068003243, -20.71562501060755], [164.86480068003243, -20.71491142514104], [164.86535665785422, -20.71491142514104], [164.86535665785422, -20.71562501060755], [164.86480068003243, -20.71562501060755]]]}}]}, "key": "properties.id"}}, {"aggregate": [{"op": "sum", "field": "budget", "as": "max_budget"}, {"op": "sum", "field": "progress", "as": "sum_Installed_qty"}], "groupby": ["id", "geom"]}, {"calculate": "datum.sum_Installed_qty/ datum.max_budget", "as": "progresstodate"}, {"calculate": "datum.geom.geometry", "as": "geometry"}, {"calculate": "datum.geom.type", "as": "type"}], "width": 500}], "$schema": "https://vega.github.io/schema/vega-lite/v2.6.0.json", "datasets": {"data-65efcf1efe3271b993d3c4822e0b34b8": [{"id": 1, "status": "piling", "budget": 1, "progress": 0.1}, {"id": 2, "status": "piling", "budget": 1, "progress": 0.2}, {"id": 3, "status": "piling", "budget": 1, "progress": 0.3}, {"id": 4, "status": "piling", "budget": 1, "progress": 0.4}, {"id": 5, "status": "piling", "budget": 1, "progress": 0.1}, {"id": 6, "status": "piling", "budget": 1, "progress": 0.1}, {"id": 7, "status": "piling", "budget": 1, "progress": 0.1}, {"id": 8, "status": "piling", "budget": 1, "progress": 0.7}, {"id": 9, "status": "piling", "budget": 1, "progress": 0.5}, {"id": 10, "status": "piling", "budget": 1, "progress": 0.5}, {"id": 11, "status": "piling", "budget": 1, "progress": 0.9}, {"id": 1, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 2, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 3, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 4, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 5, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 6, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 7, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 8, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 9, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 10, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 11, "status": "formworks", "budget": 1, "progress": 0.1}, {"id": 1, "status": "concrete", "budget": 1, "progress": 0.5}, {"id": 2, "status": "concrete", "budget": 1, "progress": 0.2}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));

  </script>
</body>
</html>